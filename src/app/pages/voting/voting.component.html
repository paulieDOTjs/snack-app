<h2 class="hdg hdg_2">Snack Voting</h2>
<h3>Vote on the snacks you want to see in this month's rotation</h3>
<hr class="top-line" />
<h4>{{ remaining }} Votes Remaining</h4>

<div *ngIf="!loading; else loadingText">
  <section *ngIf="snacks.length > 0">
    <table>
      <caption>
        <h2>Available Items</h2>
        <div class="circle-counter">{{ snacks.length }}</div>
      </caption>
      <tbody>
        <tr *ngFor="let snack of snacks">
          <td>
            <button (click)="castVote(snack.id)">
              <span
                *ngIf="votesCast.includes(snack.id)"
                class="material-icons material-icons-outlined"
              >
                done
              </span>

              <span
                *ngIf="!votesCast.includes(snack.id)"
                class="material-icons material-icons-outlined"
              >
                add
              </span>
            </button>
          </td>
          <td>{{ snack.brand }} {{ snack.product }}</td>
          <td class="table-votes">{{ snack.votes }}</td>
        </tr>
      </tbody>
    </table>

    <div class="selection-wrapper">
      <div class="selection-header">
        <h2>Selection</h2>
        <div class="circle-counter">{{ votesCast.length }}</div>
      </div>
      <hr />
      <ul *ngFor="let snackVote of votesCast">
        <app-snack-selection
          [snackVote]="snackVote"
          [snacks]="snacks"
        ></app-snack-selection>
      </ul>
    </div>
  </section>
</div>
<ng-template #loadingText> Loading... </ng-template>
<div *ngFor="let error of errors">
  <app-error-message [error]="error"></app-error-message>
</div>
